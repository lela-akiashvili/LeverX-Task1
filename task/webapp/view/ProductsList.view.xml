<mvc:View
  controllerName="task.controller.ProductsList"
  xmlns="sap.m"
  xmlns:core="sap.ui.core"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:f="sap.f"
  xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
  xmlns:smartTable="sap.ui.comp.smarttable">

  <f:DynamicPage id="ProductsList" headerExpanded="true" showFooter="true">
    <f:title>
      <f:DynamicPageTitle>
        <f:heading>
          <Title text="Product List" level="H1" />
        </f:heading>
        <f:breadcrumbs>
          <Breadcrumbs>
            <links>
              <Link text="Home" />
            </links>
          </Breadcrumbs>
        </f:breadcrumbs>
      </f:DynamicPageTitle>
    </f:title>
    <f:header>
      <f:DynamicPageHeader>

        <f:content>
          <smartFilterBar:SmartFilterBar
            id="smartFilterBar"
            entitySet="Products"
            liveMode="true"
            showClearOnFB="true"
          >
            <smartFilterBar:controlConfiguration>
              <smartFilterBar:ControlConfiguration
                key="Name" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                key="Description" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                key="Rating" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                key="Price" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                label="Category Name"
                key="Category.Name" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                label="Supplier Name"
                key="Supplier.Name" visibleInAdvancedArea="true"
                preventInitialDataFetchInValueHelpDialog="false" />
              <smartFilterBar:ControlConfiguration
                label="Discontinued Date"
                key="DiscontinuedDate" visibleInAdvancedArea="true"
                conditionType="{
                  module: 'sap.ui.comp.config.condition.DateRangeType'
                }" />
              <smartFilterBar:ControlConfiguration
                label="Release Date"
                key="ReleaseDate"
                visibleInAdvancedArea="true"
                conditionType="{
                  module: 'sap.ui.comp.config.condition.DateRangeType'
                }"
              />
            </smartFilterBar:controlConfiguration>
          </smartFilterBar:SmartFilterBar>
        </f:content>
      </f:DynamicPageHeader>
    </f:header>


    <f:content>
      <smartTable:SmartTable
        id="smartTable"
        header="Products"
        tableType="ResponsiveTable"
        entitySet="Products"
        smartFilterId="smartFilterBar"
        enableExport="true"
        demandPopin="true"
        beforeRebindTable="onBeforeRebindTable"
        enableAutoBinding="true"
        showRowCount="true"
        initiallyVisibleFields="Name,Description">
        <Table multiSelectMode="Default">
          <columns>
            <!-- Price -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"Price","leadingProperty":"Price",
                  "sortProperty":"Price",
               "filterProperty":"Price",
                  "columnIndex":2}' />
              </customData>
              <Text text="Price" />
            </Column>
            <!-- Category -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"Category","leadingProperty":"Category/Name",  "sortProperty":"Category/Name",
               "filterProperty":"Category/Name","columnIndex":3}' />
              </customData>
              <Text text="Category" />
            </Column>
            <!-- Supplier -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"Supplier","leadingProperty":"Supplier/Name",  "sortProperty":"Supplier/Name",
               "filterProperty":"Supplier/Name","columnIndex":4}' />
              </customData>
              <Text text="Supplier" />
            </Column>
            <!-- Release Date -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"ReleaseDate","leadingProperty":"ReleaseDate","sortProperty":"ReleaseDate",
               "filterProperty":"ReleaseDate","columnIndex":5}' />
              </customData>
              <Text text="Release Date" />
            </Column>
            <!-- Discontinued Date -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"DiscontinuedDate","leadingProperty":"DiscontinuedDate","sortProperty":"DiscontinuedDate",
               "filterProperty":"DiscontinuedDate","columnIndex":6}' />
              </customData>
              <Text text="Discontinued Date" />
            </Column>
            <!-- Rating -->
            <Column>
              <customData>
                <core:CustomData
                  key="p13nData"
                  value='{"columnKey":"Rating","sortProperty":"Rating",
               "filterProperty":"Rating","leadingProperty":"Rating","columnIndex":7}' />
              </customData>
              <Text text="Rating" />
            </Column>
          </columns>
          <items>
            <ColumnListItem type="Navigation" press=".onRowPress">
              <cells>
                <Text
                  text="{path:'Price', type:'sap.ui.model.type.Float', formatOptions:{minFractionDigits:2}} USD" />
                <Text text="{Category/Name}" />
                <Text text="{Supplier/Name}" />
                <Text
                  text="{path:'ReleaseDate', type:'sap.ui.model.type.Date', formatOptions:{style:'medium'}}" />
                <Text
                  text="{path:'DiscontinuedDate', type:'sap.ui.model.type.Date', formatOptions:{style:'medium'}}" />
                <RatingIndicator maxValue="5" value="{Rating}" iconSize="1rem" />
              </cells>
            </ColumnListItem>
          </items>
        </Table>
      </smartTable:SmartTable>
    </f:content>
  </f:DynamicPage>
</mvc:View>